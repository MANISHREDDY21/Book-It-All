<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BOOK IT ALL - Trip Planner</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }

    .header {
      background: #008080;
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }

    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .planner-section {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .section-title {
      color: #008080;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .planner-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }

    .planner-card {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .planner-card:hover {
      border-color: #008080;
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,128,128,0.1);
    }

    .planner-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    .planner-title {
      font-size: 20px;
      font-weight: bold;
      color: #008080;
      margin-bottom: 10px;
    }

    .planner-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 20px;
    }

    .planner-btn {
      background: #008080;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: background 0.3s;
    }

    .planner-btn:hover {
      background: #006666;
    }

    .quick-plan-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
    }

    .form-group input, .form-group select {
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #008080;
    }

    .plan-results {
      margin-top: 30px;
      display: none;
    }

    .itinerary-day {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .day-title {
      font-size: 18px;
      font-weight: bold;
      color: #008080;
    }

    .day-date {
      color: #666;
      font-size: 14px;
    }

    .activity-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px;
      border-left: 3px solid #008080;
      margin-bottom: 10px;
      background: #f8f9fa;
      border-radius: 5px;
    }

    .activity-time {
      font-weight: bold;
      color: #008080;
      min-width: 80px;
    }

    .activity-details {
      flex: 1;
    }

    .activity-title {
      font-weight: bold;
      margin-bottom: 2px;
    }

    .activity-description {
      color: #666;
      font-size: 14px;
    }

    .templates-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }

    .template-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
    }

    .template-card:hover {
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    .template-image {
      height: 150px;
      background: linear-gradient(45deg, #008080, #00a0a0);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 36px;
    }

    .template-content {
      padding: 20px;
    }

    .template-title {
      font-weight: bold;
      color: #008080;
      margin-bottom: 8px;
    }

    .template-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .template-duration {
      background: #e8f5f5;
      color: #008080;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      display: inline-block;
    }

    /* Custom Planner Styles */
    .custom-planner {
      display: none;
    }

    .day-planner {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .add-activity-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .activity-form {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
      border: 1px solid #ddd;
    }

    .activity-form input, .activity-form select, .activity-form textarea {
      width: 100%;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }

    /* AI Assistant Styles */
    .ai-assistant {
      display: none;
    }

    .chat-container {
      background: #f8f9fa;
      border-radius: 10px;
      height: 400px;
      overflow-y: auto;
      padding: 20px;
      margin-bottom: 20px;
    }

    .chat-message {
      margin-bottom: 15px;
      padding: 10px 15px;
      border-radius: 10px;
      max-width: 80%;
    }

    .chat-message.user {
      background: #008080;
      color: white;
      margin-left: auto;
    }

    .chat-message.ai {
      background: white;
      border: 1px solid #ddd;
    }

    .chat-input-container {
      display: flex;
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 25px;
      outline: none;
    }

    .chat-send-btn {
      background: #008080;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .planner-grid {
        grid-template-columns: 1fr;
      }
      
      .quick-plan-form {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <a href="main.html" class="back-btn">‚Üê Back</a>
    <h1>üó∫Ô∏è Trip Planner</h1>
    <p>Plan your perfect journey with AI-powered recommendations</p>
  </div>

  <div class="container">
    <!-- Planning Options -->
    <div class="planner-section">
      <div class="section-title">
        <span>üéØ</span>
        Choose Your Planning Style
      </div>
      
      <div class="planner-grid">
        <div class="planner-card" onclick="showQuickPlanner()">
          <div class="planner-icon">‚ö°</div>
          <div class="planner-title">Quick Planner</div>
          <div class="planner-description">Get instant itinerary suggestions based on your preferences and budget</div>
          <button class="planner-btn">Start Quick Plan</button>
        </div>
        
        <div class="planner-card" onclick="showCustomPlanner()">
          <div class="planner-icon">üé®</div>
          <div class="planner-title">Custom Planner</div>
          <div class="planner-description">Build your trip day-by-day with detailed activity planning</div>
          <button class="planner-btn">Create Custom Plan</button>
        </div>
        
        <div class="planner-card" onclick="showAIPlanner()">
          <div class="planner-icon">ü§ñ</div>
          <div class="planner-title">AI Assistant</div>
          <div class="planner-description">Let our AI create a personalized itinerary based on your travel style</div>
          <button class="planner-btn">Use AI Planner</button>
        </div>
      </div>
    </div>

    <!-- Quick Planner Form -->
    <div class="planner-section" id="quick-planner" style="display: none;">
      <div class="section-title">
        <span>‚ö°</span>
        Quick Trip Planner
      </div>
      
      <div class="quick-plan-form">
        <div class="form-group">
          <label for="destination">Destination</label>
          <input type="text" id="destination" placeholder="Where do you want to go?">
        </div>
        
        <div class="form-group">
          <label for="duration">Duration</label>
          <select id="duration">
            <option value="">Select duration</option>
            <option value="1">1 Day</option>
            <option value="2">2 Days</option>
            <option value="3">3 Days</option>
            <option value="4-7">4-7 Days</option>
            <option value="7+">1 Week+</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="budget">Budget Range</label>
          <select id="budget">
            <option value="">Select budget</option>
            <option value="budget">Budget (‚Çπ5,000-15,000)</option>
            <option value="mid">Mid-range (‚Çπ15,000-50,000)</option>
            <option value="luxury">Luxury (‚Çπ50,000+)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="travel-style">Travel Style</label>
          <select id="travel-style">
            <option value="">Select style</option>
            <option value="adventure">Adventure & Sports</option>
            <option value="culture">Culture & Heritage</option>
            <option value="relaxation">Beach & Relaxation</option>
            <option value="nature">Nature & Wildlife</option>
            <option value="food">Food & Cuisine</option>
            <option value="nightlife">Nightlife & Entertainment</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="start-date">Start Date</label>
          <input type="date" id="start-date">
        </div>
        
        <div class="form-group" style="display: flex; align-items: end;">
          <button class="planner-btn" style="width: 100%; padding: 15px;" onclick="generateQuickPlan()">
            Generate Itinerary
          </button>
        </div>
      </div>
      
      <div id="plan-results" class="plan-results">
        <!-- Generated itinerary will appear here -->
      </div>
    </div>

    <!-- Custom Planner -->
    <div class="planner-section custom-planner" id="custom-planner">
      <div class="section-title">
        <span>üé®</span>
        Custom Trip Planner
      </div>
      
      <div class="quick-plan-form">
        <div class="form-group">
          <label for="custom-destination">Destination</label>
          <input type="text" id="custom-destination" placeholder="Enter destination">
        </div>
        
        <div class="form-group">
          <label for="custom-start-date">Start Date</label>
          <input type="date" id="custom-start-date">
        </div>
        
        <div class="form-group">
          <label for="custom-end-date">End Date</label>
          <input type="date" id="custom-end-date">
        </div>
        
        <div class="form-group" style="display: flex; align-items: end;">
          <button class="planner-btn" style="width: 100%; padding: 15px;" onclick="initializeCustomPlan()">
            Start Planning
          </button>
        </div>
      </div>
      
      <div id="custom-plan-days" style="margin-top: 30px;">
        <!-- Custom plan days will appear here -->
      </div>
    </div>

    <!-- AI Assistant -->
    <div class="planner-section ai-assistant" id="ai-assistant">
      <div class="section-title">
        <span>ü§ñ</span>
        AI Travel Assistant
      </div>
      
      <div class="chat-container" id="chat-container">
        <div class="chat-message ai">
          <strong>AI Assistant:</strong> Hello! I'm your AI travel assistant. I can help you plan the perfect trip based on your preferences. Tell me where you'd like to go and what kind of experience you're looking for!
        </div>
      </div>
      
      <div class="chat-input-container">
        <input type="text" class="chat-input" id="chat-input" placeholder="Ask me anything about your trip..." onkeypress="handleChatEnter(event)">
        <button class="chat-send-btn" onclick="sendChatMessage()">Send</button>
      </div>
    </div>

    <!-- Pre-made Templates -->
    <div class="planner-section">
      <div class="section-title">
        <span>üìã</span>
        Popular Trip Templates
      </div>
      
      <div class="templates-section">
        <div class="template-card" onclick="useTemplate('goa-beach')">
          <div class="template-image">üèñÔ∏è</div>
          <div class="template-content">
            <div class="template-title">Goa Beach Getaway</div>
            <div class="template-description">Perfect beach vacation with water sports, nightlife, and relaxation</div>
            <div class="template-duration">3-5 Days</div>
          </div>
        </div>
        
        <div class="template-card" onclick="useTemplate('rajasthan-heritage')">
          <div class="template-image">üè∞</div>
          <div class="template-content">
            <div class="template-title">Rajasthan Heritage Tour</div>
            <div class="template-description">Explore palaces, forts, and rich cultural heritage of royal Rajasthan</div>
            <div class="template-duration">7-10 Days</div>
          </div>
        </div>
        
        <div class="template-card" onclick="useTemplate('kerala-backwaters')">
          <div class="template-image">üõ∂</div>
          <div class="template-content">
            <div class="template-title">Kerala Backwaters</div>
            <div class="template-description">Serene houseboat experience through God's own country</div>
            <div class="template-duration">4-6 Days</div>
          </div>
        </div>
        
        <div class="template-card" onclick="useTemplate('himalayan-adventure')">
          <div class="template-image">üèîÔ∏è</div>
          <div class="template-content">
            <div class="template-title">Himalayan Adventure</div>
            <div class="template-description">Trekking, mountain views, and spiritual experiences in the Himalayas</div>
            <div class="template-duration">5-8 Days</div>
          </div>
        </div>
        
        <div class="template-card" onclick="useTemplate('golden-triangle')">
          <div class="template-image">üïå</div>
          <div class="template-content">
            <div class="template-title">Golden Triangle</div>
            <div class="template-description">Classic Delhi-Agra-Jaipur circuit covering India's iconic monuments</div>
            <div class="template-duration">6-8 Days</div>
          </div>
        </div>
        
        <div class="template-card" onclick="useTemplate('south-india-temples')">
          <div class="template-image">üïâÔ∏è</div>
          <div class="template-content">
            <div class="template-title">South India Temples</div>
            <div class="template-description">Spiritual journey through ancient temples and classical culture</div>
            <div class="template-duration">8-12 Days</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function showQuickPlanner() {
      document.getElementById('quick-planner').style.display = 'block';
      document.getElementById('custom-planner').style.display = 'none';
      document.getElementById('ai-assistant').style.display = 'none';
      document.getElementById('quick-planner').scrollIntoView({ behavior: 'smooth' });
    }

    function showCustomPlanner() {
      document.getElementById('custom-planner').style.display = 'block';
      document.getElementById('quick-planner').style.display = 'none';
      document.getElementById('ai-assistant').style.display = 'none';
      document.getElementById('custom-planner').scrollIntoView({ behavior: 'smooth' });
    }

    function showAIPlanner() {
      document.getElementById('ai-assistant').style.display = 'block';
      document.getElementById('quick-planner').style.display = 'none';
      document.getElementById('custom-planner').style.display = 'none';
      document.getElementById('ai-assistant').scrollIntoView({ behavior: 'smooth' });
    }

    function generateQuickPlan() {
      const destination = document.getElementById('destination').value;
      const duration = document.getElementById('duration').value;
      const budget = document.getElementById('budget').value;
      const travelStyle = document.getElementById('travel-style').value;
      const startDate = document.getElementById('start-date').value;

      if (!destination || !duration || !budget || !travelStyle) {
        alert('Please fill in all required fields to generate your itinerary');
        return;
      }

      // Generate sample itinerary
      const itinerary = generateSampleItinerary(destination, duration, travelStyle, startDate);
      displayItinerary(itinerary);
    }

    function generateSampleItinerary(destination, duration, style, startDate) {
      const activities = {
        adventure: ['Trekking', 'Rock climbing', 'Water sports', 'Paragliding', 'River rafting'],
        culture: ['Museum visits', 'Heritage walks', 'Local markets', 'Traditional shows', 'Art galleries'],
        relaxation: ['Beach time', 'Spa treatments', 'Sunset viewing', 'Leisurely walks', 'Pool relaxation'],
        nature: ['Wildlife safari', 'Bird watching', 'Nature trails', 'Botanical gardens', 'Scenic drives'],
        food: ['Food tours', 'Cooking classes', 'Local restaurants', 'Street food exploration', 'Wine tasting'],
        nightlife: ['Club hopping', 'Live music', 'Night markets', 'Rooftop bars', 'Cultural performances']
      };

      const days = duration === '1' ? 1 : duration === '2' ? 2 : duration === '3' ? 3 : 5;
      const itinerary = [];

      for (let i = 0; i < days; i++) {
        const date = new Date(startDate);
        date.setDate(date.getDate() + i);
        
        const dayActivities = activities[style] || activities.culture;
        const selectedActivities = dayActivities.slice(0, 3);

        itinerary.push({
          day: i + 1,
          date: date.toLocaleDateString(),
          activities: [
            { time: '09:00', title: selectedActivities[0], description: `Start your day with ${selectedActivities[0].toLowerCase()} in ${destination}` },
            { time: '14:00', title: selectedActivities[1], description: `Afternoon ${selectedActivities[1].toLowerCase()} experience` },
            { time: '18:00', title: selectedActivities[2], description: `Evening ${selectedActivities[2].toLowerCase()} to end the day` }
          ]
        });
      }

      return itinerary;
    }

    function displayItinerary(itinerary) {
      const resultsDiv = document.getElementById('plan-results');
      resultsDiv.innerHTML = '';

      itinerary.forEach(day => {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'itinerary-day';
        dayDiv.innerHTML = `
          <div class="day-header">
            <div class="day-title">Day ${day.day}</div>
            <div class="day-date">${day.date}</div>
          </div>
          ${day.activities.map(activity => `
            <div class="activity-item">
              <div class="activity-time">${activity.time}</div>
              <div class="activity-details">
                <div class="activity-title">${activity.title}</div>
                <div class="activity-description">${activity.description}</div>
              </div>
            </div>
          `).join('')}
        `;
        resultsDiv.appendChild(dayDiv);
      });

      resultsDiv.style.display = 'block';
      resultsDiv.scrollIntoView({ behavior: 'smooth' });

      // Add save button
      const saveBtn = document.createElement('button');
      saveBtn.className = 'planner-btn';
      saveBtn.textContent = 'Save This Itinerary';
      saveBtn.style.marginTop = '20px';
      saveBtn.onclick = () => saveItinerary(itinerary);
      resultsDiv.appendChild(saveBtn);
    }

    // Custom Planner Functions
    function initializeCustomPlan() {
      const destination = document.getElementById('custom-destination').value;
      const startDate = document.getElementById('custom-start-date').value;
      const endDate = document.getElementById('custom-end-date').value;

      if (!destination || !startDate || !endDate) {
        alert('Please fill in all fields to start custom planning');
        return;
      }

      const start = new Date(startDate);
      const end = new Date(endDate);
      const daysDiff = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;

      if (daysDiff <= 0) {
        alert('End date must be after start date');
        return;
      }

      createCustomPlanDays(destination, start, daysDiff);
    }

    function createCustomPlanDays(destination, startDate, numDays) {
      const container = document.getElementById('custom-plan-days');
      container.innerHTML = '';

      for (let i = 0; i < numDays; i++) {
        const date = new Date(startDate);
        date.setDate(date.getDate() + i);

        const dayDiv = document.createElement('div');
        dayDiv.className = 'day-planner';
        dayDiv.innerHTML = `
          <h3>Day ${i + 1} - ${date.toLocaleDateString()}</h3>
          <div class="activities-list" id="activities-day-${i}">
            <!-- Activities will be added here -->
          </div>
          <button class="add-activity-btn" onclick="addActivity(${i})">+ Add Activity</button>
        `;
        container.appendChild(dayDiv);
      }

      // Add save button
      const saveBtn = document.createElement('button');
      saveBtn.className = 'planner-btn';
      saveBtn.textContent = 'Save Custom Plan';
      saveBtn.style.marginTop = '20px';
      saveBtn.onclick = saveCustomPlan;
      container.appendChild(saveBtn);
    }

    function addActivity(dayIndex) {
      const activitiesList = document.getElementById(`activities-day-${dayIndex}`);
      const activityId = `activity-${dayIndex}-${Date.now()}`;

      const activityForm = document.createElement('div');
      activityForm.className = 'activity-form';
      activityForm.innerHTML = `
        <input type="time" placeholder="Time" id="${activityId}-time">
        <input type="text" placeholder="Activity Title" id="${activityId}-title">
        <textarea placeholder="Description" id="${activityId}-description" rows="2"></textarea>
        <select id="${activityId}-type">
          <option value="sightseeing">Sightseeing</option>
          <option value="food">Food & Dining</option>
          <option value="adventure">Adventure</option>
          <option value="relaxation">Relaxation</option>
          <option value="shopping">Shopping</option>
          <option value="transport">Transport</option>
        </select>
        <button type="button" onclick="saveActivity('${activityId}', ${dayIndex})">Save Activity</button>
        <button type="button" onclick="cancelActivity('${activityId}')">Cancel</button>
      `;

      activitiesList.appendChild(activityForm);
    }

    function saveActivity(activityId, dayIndex) {
      const time = document.getElementById(`${activityId}-time`).value;
      const title = document.getElementById(`${activityId}-title`).value;
      const description = document.getElementById(`${activityId}-description`).value;
      const type = document.getElementById(`${activityId}-type`).value;

      if (!time || !title) {
        alert('Please fill in time and title');
        return;
      }

      const activitiesList = document.getElementById(`activities-day-${dayIndex}`);
      const activityForm = document.querySelector(`#${activityId}-time`).closest('.activity-form');

      const activityItem = document.createElement('div');
      activityItem.className = 'activity-item';
      activityItem.innerHTML = `
        <div class="activity-time">${time}</div>
        <div class="activity-details">
          <div class="activity-title">${title} (${type})</div>
          <div class="activity-description">${description}</div>
        </div>
        <button onclick="removeActivity(this)" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Remove</button>
      `;

      activitiesList.replaceChild(activityItem, activityForm);
    }

    function cancelActivity(activityId) {
      const activityForm = document.querySelector(`#${activityId}-time`).closest('.activity-form');
      activityForm.remove();
    }

    function removeActivity(button) {
      button.closest('.activity-item').remove();
    }

    function saveCustomPlan() {
      const user = JSON.parse(localStorage.getItem('travelmate_current_user') || 'null');
      
      if (!user) {
        alert('Please login to save your custom plan');
        return;
      }

      const destination = document.getElementById('custom-destination').value;
      const customPlan = {
        id: `CUSTOM${Date.now()}`,
        destination: destination,
        type: 'custom',
        createdAt: new Date().toISOString(),
        days: []
      };

      // Collect all days and activities
      const dayPlanners = document.querySelectorAll('.day-planner');
      dayPlanners.forEach((dayDiv, index) => {
        const activities = [];
        const activityItems = dayDiv.querySelectorAll('.activity-item');
        
        activityItems.forEach(item => {
          const time = item.querySelector('.activity-time').textContent;
          const titleElement = item.querySelector('.activity-title');
          const descElement = item.querySelector('.activity-description');
          
          activities.push({
            time: time,
            title: titleElement.textContent,
            description: descElement.textContent
          });
        });

        customPlan.days.push({
          day: index + 1,
          activities: activities
        });
      });

      const savedPlans = JSON.parse(localStorage.getItem(`travelmate_plans_${user.id}`) || '[]');
      savedPlans.push(customPlan);
      localStorage.setItem(`travelmate_plans_${user.id}`, JSON.stringify(savedPlans));

      alert(`Custom plan saved successfully!\nPlan ID: ${customPlan.id}\nDestination: ${destination}`);
    }

    // AI Assistant Functions
    function handleChatEnter(event) {
      if (event.key === 'Enter') {
        sendChatMessage();
      }
    }

    function sendChatMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      
      if (!message) return;

      // Add user message
      addChatMessage(message, 'user');
      input.value = '';

      // Generate AI response
      setTimeout(() => {
        const aiResponse = generateAIResponse(message);
        addChatMessage(aiResponse, 'ai');
      }, 1000);
    }

    function addChatMessage(message, sender) {
      const chatContainer = document.getElementById('chat-container');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${sender}`;
      
      if (sender === 'ai') {
        messageDiv.innerHTML = `<strong>AI Assistant:</strong> ${message}`;
      } else {
        messageDiv.innerHTML = `<strong>You:</strong> ${message}`;
      }

      chatContainer.appendChild(messageDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function generateAIResponse(userMessage) {
      const message = userMessage.toLowerCase();
      
      // Simple AI responses based on keywords
      if (message.includes('goa') || message.includes('beach')) {
        return "Goa is perfect for beach lovers! I recommend a 4-day itinerary: Day 1 - North Goa beaches (Baga, Calangute), Day 2 - Water sports and beach shacks, Day 3 - Old Goa churches and spice plantations, Day 4 - South Goa beaches (Palolem, Agonda). Budget: ‚Çπ15,000-25,000 per person.";
      } else if (message.includes('rajasthan') || message.includes('jaipur') || message.includes('palace')) {
        return "Rajasthan offers incredible heritage experiences! For a 7-day Golden Triangle extension: Delhi (2 days) ‚Üí Agra (1 day) ‚Üí Jaipur (2 days) ‚Üí Jodhpur (1 day) ‚Üí Udaipur (1 day). Must-visit: Amber Fort, City Palace, Mehrangarh Fort. Budget: ‚Çπ25,000-40,000 per person.";
      } else if (message.includes('kerala') || message.includes('backwater')) {
        return "Kerala backwaters are magical! 5-day plan: Kochi (1 day) ‚Üí Munnar (2 days) ‚Üí Alleppey houseboat (1 day) ‚Üí Kumarakom (1 day). Experience tea plantations, spice gardens, and traditional houseboats. Best time: Oct-Mar. Budget: ‚Çπ20,000-35,000 per person.";
      } else if (message.includes('budget') || message.includes('cheap')) {
        return "For budget travel, consider: 1) Travel during off-season, 2) Use public transport, 3) Stay in hostels/budget hotels, 4) Eat at local places, 5) Book in advance. Popular budget destinations: Rishikesh, Hampi, Pushkar, Mcleodganj. Budget: ‚Çπ5,000-15,000 for 3-4 days.";
      } else if (message.includes('adventure') || message.includes('trekking')) {
        return "For adventure seekers: Himachal Pradesh offers great trekking - Triund, Kheerganga, Hampta Pass. Uttarakhand has Valley of Flowers, Kedarkantha. Rajasthan offers desert camping. Maharashtra has fort trekking. Budget: ‚Çπ8,000-20,000 per person for 3-5 days.";
      } else if (message.includes('food') || message.includes('cuisine')) {
        return "India's culinary diversity is amazing! Food tours I recommend: Delhi street food tour, Mumbai chaat walks, Lucknow kebab trail, Chennai South Indian breakfast tour, Kolkata sweet shops. Each city offers unique flavors. Budget: ‚Çπ500-2,000 per food tour.";
      } else if (message.includes('family') || message.includes('kids')) {
        return "Family-friendly destinations: 1) Goa - beaches and water sports, 2) Kerala - houseboats and wildlife, 3) Rajasthan - palaces and camel rides, 4) Himachal - toy trains and hill stations, 5) Karnataka - Mysore Palace and Coorg. Budget: ‚Çπ20,000-50,000 for family of 4.";
      } else if (message.includes('romantic') || message.includes('honeymoon')) {
        return "Romantic getaways: 1) Udaipur - City of Lakes, 2) Shimla-Manali - hill station charm, 3) Goa - beach romance, 4) Kerala - backwater serenity, 5) Darjeeling - mountain views. Perfect for couples! Budget: ‚Çπ25,000-50,000 per couple for 4-5 days.";
      } else {
        return "I'd be happy to help you plan your trip! Tell me more about: 1) Your preferred destination, 2) Budget range, 3) Duration of travel, 4) Type of experience you want (adventure, relaxation, culture, etc.), and I'll create a personalized itinerary for you!";
      }
    }

    function useTemplate(templateId) {
      const templates = {
        'goa-beach': {
          destination: 'Goa',
          duration: '4',
          style: 'relaxation',
          description: 'Beach paradise with water sports and nightlife'
        },
        'rajasthan-heritage': {
          destination: 'Rajasthan',
          duration: '7+',
          style: 'culture',
          description: 'Royal palaces and desert adventures'
        },
        'kerala-backwaters': {
          destination: 'Kerala',
          duration: '4-7',
          style: 'nature',
          description: 'Serene backwaters and spice plantations'
        },
        'himalayan-adventure': {
          destination: 'Himalayas',
          duration: '4-7',
          style: 'adventure',
          description: 'Mountain peaks and trekking trails'
        },
        'golden-triangle': {
          destination: 'Delhi-Agra-Jaipur',
          duration: '4-7',
          style: 'culture',
          description: 'Iconic monuments and rich history'
        },
        'south-india-temples': {
          destination: 'South India',
          duration: '7+',
          style: 'culture',
          description: 'Ancient temples and spiritual experiences'
        }
      };

      const template = templates[templateId];
      if (template) {
        alert(`üìã ${template.destination} Template Selected!\n\n${template.description}\n\nDuration: ${template.duration} days\nStyle: ${template.style}\n\nThis template will be loaded into the Quick Planner for customization.`);
        
        // Auto-fill the quick planner
        document.getElementById('destination').value = template.destination;
        document.getElementById('duration').value = template.duration;
        document.getElementById('travel-style').value = template.style;
        
        showQuickPlanner();
      }
    }

    function saveItinerary(itinerary) {
      const user = JSON.parse(localStorage.getItem('travelmate_current_user') || 'null');
      
      if (!user) {
        alert('Please login to save your itinerary');
        return;
      }

      const savedPlans = JSON.parse(localStorage.getItem(`travelmate_plans_${user.id}`) || '[]');
      const newPlan = {
        id: `PLAN${Date.now()}`,
        destination: document.getElementById('destination').value,
        itinerary: itinerary,
        createdAt: new Date().toISOString(),
        status: 'saved'
      };

      savedPlans.push(newPlan);
      localStorage.setItem(`travelmate_plans_${user.id}`, JSON.stringify(savedPlans));

      alert(`üíæ Itinerary Saved Successfully!\n\nPlan ID: ${newPlan.id}\nDestination: ${newPlan.destination}\n\nYou can access your saved plans from your profile or upcoming trips section.`);
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      // Set minimum date to today
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('start-date').min = today;
      document.getElementById('custom-start-date').min = today;
      document.getElementById('custom-end-date').min = today;
    });
  </script>
</body>
</html>