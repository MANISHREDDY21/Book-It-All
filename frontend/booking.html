<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BOOK IT ALL - Book Your Journey</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%);
      min-height: 100vh;
    }

    .header {
      background: #008080;
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }

    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255,255,255,0.2);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .booking-tabs {
      display: flex;
      background: white;
      border-radius: 15px 15px 0 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .tab {
      flex: 1;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab.active {
      background: #008080;
      color: white;
      border-bottom-color: #006666;
    }

    .tab:hover:not(.active) {
      background: #f0f0f0;
    }

    .tab-icon {
      font-size: 24px;
      margin-bottom: 8px;
      display: block;
    }

    .booking-form {
      background: white;
      padding: 40px;
      border-radius: 0 0 15px 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
    }

    .form-group input, .form-group select {
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #008080;
      box-shadow: 0 0 10px rgba(0,128,128,0.1);
    }

    .location-input {
      position: relative;
    }

    .swap-btn {
      position: absolute;
      right: -15px;
      top: 50%;
      transform: translateY(-50%);
      background: #008080;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      font-size: 18px;
      z-index: 10;
    }

    .swap-btn:hover {
      background: #006666;
    }

    .search-btn {
      background: linear-gradient(45deg, #008080, #00a0a0);
      color: white;
      border: none;
      padding: 18px 40px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      margin-top: 20px;
    }

    .search-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,128,128,0.3);
    }

    .trip-type {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }

    .trip-option {
      flex: 1;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .trip-option.selected {
      border-color: #008080;
      background: #e8f5f5;
      color: #008080;
    }

    .search-results {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-top: 30px;
      display: none;
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border: 2px solid #f0f0f0;
      border-radius: 10px;
      margin-bottom: 15px;
      transition: all 0.3s;
    }

    .result-item:hover {
      border-color: #008080;
      box-shadow: 0 2px 8px rgba(0,128,128,0.1);
    }

    .result-info {
      flex: 1;
    }

    .result-route {
      font-size: 18px;
      font-weight: bold;
      color: #008080;
      margin-bottom: 5px;
    }

    .result-details {
      color: #666;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .result-price {
      font-size: 20px;
      font-weight: bold;
      color: #28a745;
      margin-right: 20px;
    }

    .book-btn {
      background: #008080;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    .book-btn:hover {
      background: #006666;
    }

    .popular-routes {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-top: 30px;
    }

    .section-title {
      color: #008080;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      text-align: center;
    }

    .routes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .route-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .route-card:hover {
      border-color: #008080;
      transform: translateY(-2px);
    }

    .route-name {
      font-weight: bold;
      color: #008080;
      margin-bottom: 10px;
    }

    .route-price {
      color: #28a745;
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .booking-tabs {
        flex-direction: column;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .trip-type {
        flex-direction: column;
      }
      
      .result-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <a href="main.html" class="back-btn">‚Üê Back</a>
    <h1>üé´ Book Your Journey</h1>
    <p>Find the best deals for flights, trains, buses & cabs</p>
  </div>

  <div class="container">
    <!-- Booking Tabs -->
    <div class="booking-tabs">
      <div class="tab active" onclick="switchTab('flight')">
        <span class="tab-icon">‚úàÔ∏è</span>
        Flights
      </div>
      <div class="tab" onclick="switchTab('train')">
        <span class="tab-icon">üöÜ</span>
        Trains
      </div>
      <div class="tab" onclick="switchTab('bus')">
        <span class="tab-icon">üöå</span>
        Buses
      </div>
      <div class="tab" onclick="switchTab('cab')">
        <span class="tab-icon">üöó</span>
        Cabs
      </div>
    </div>

    <!-- Booking Form -->
    <div class="booking-form">
      <!-- Flight Form -->
      <div class="form-section active" id="flight-form">
        <div class="trip-type">
          <div class="trip-option selected" onclick="selectTripType('oneway')">
            <strong>One Way</strong>
          </div>
          <div class="trip-option" onclick="selectTripType('roundtrip')">
            <strong>Round Trip</strong>
          </div>
          <div class="trip-option" onclick="selectTripType('multicity')">
            <strong>Multi City</strong>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group location-input">
            <label for="flight-from">From</label>
            <input type="text" id="flight-from" placeholder="Departure city" list="cities">
            <button class="swap-btn" onclick="swapLocations('flight')" title="Swap locations">‚áÑ</button>
          </div>
          
          <div class="form-group">
            <label for="flight-to">To</label>
            <input type="text" id="flight-to" placeholder="Destination city" list="cities">
          </div>
          
          <div class="form-group">
            <label for="flight-departure">Departure Date</label>
            <input type="date" id="flight-departure">
          </div>
          
          <div class="form-group" id="return-date-group" style="display: none;">
            <label for="flight-return">Return Date</label>
            <input type="date" id="flight-return">
          </div>
          
          <div class="form-group">
            <label for="flight-passengers">Passengers</label>
            <select id="flight-passengers">
              <option value="1">1 Adult</option>
              <option value="2">2 Adults</option>
              <option value="3">3 Adults</option>
              <option value="4">4 Adults</option>
              <option value="5">5+ Adults</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="flight-class">Class</label>
            <select id="flight-class">
              <option value="economy">Economy</option>
              <option value="premium">Premium Economy</option>
              <option value="business">Business</option>
              <option value="first">First Class</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchFlights()">
          üîç Search Flights
        </button>
      </div>

      <!-- Train Form -->
      <div class="form-section" id="train-form">
        <div class="form-grid">
          <div class="form-group location-input">
            <label for="train-from">From Station</label>
            <input type="text" id="train-from" placeholder="Departure station" list="stations">
            <button class="swap-btn" onclick="swapLocations('train')" title="Swap stations">‚áÑ</button>
          </div>
          
          <div class="form-group">
            <label for="train-to">To Station</label>
            <input type="text" id="train-to" placeholder="Destination station" list="stations">
          </div>
          
          <div class="form-group">
            <label for="train-date">Journey Date</label>
            <input type="date" id="train-date">
          </div>
          
          <div class="form-group">
            <label for="train-class">Class</label>
            <select id="train-class">
              <option value="sleeper">Sleeper (SL)</option>
              <option value="3ac">AC 3 Tier (3A)</option>
              <option value="2ac">AC 2 Tier (2A)</option>
              <option value="1ac">AC First Class (1A)</option>
              <option value="cc">Chair Car (CC)</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchTrains()">
          üîç Search Trains
        </button>
      </div>

      <!-- Bus Form -->
      <div class="form-section" id="bus-form">
        <div class="form-grid">
          <div class="form-group location-input">
            <label for="bus-from">From</label>
            <input type="text" id="bus-from" placeholder="Departure city" list="cities">
            <button class="swap-btn" onclick="swapLocations('bus')" title="Swap locations">‚áÑ</button>
          </div>
          
          <div class="form-group">
            <label for="bus-to">To</label>
            <input type="text" id="bus-to" placeholder="Destination city" list="cities">
          </div>
          
          <div class="form-group">
            <label for="bus-date">Journey Date</label>
            <input type="date" id="bus-date">
          </div>
          
          <div class="form-group">
            <label for="bus-type">Bus Type</label>
            <select id="bus-type">
              <option value="ac">AC Seater</option>
              <option value="nonac">Non-AC Seater</option>
              <option value="sleeper">AC Sleeper</option>
              <option value="volvo">Volvo AC</option>
              <option value="luxury">Luxury</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchBuses()">
          üîç Search Buses
        </button>
      </div>

      <!-- Cab Form -->
      <div class="form-section" id="cab-form">
        <div class="trip-type">
          <div class="trip-option selected" onclick="selectCabType('oneway')">
            <strong>One Way</strong>
          </div>
          <div class="trip-option" onclick="selectCabType('roundtrip')">
            <strong>Round Trip</strong>
          </div>
          <div class="trip-option" onclick="selectCabType('local')">
            <strong>Local</strong>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group location-input">
            <label for="cab-from">Pickup Location</label>
            <input type="text" id="cab-from" placeholder="Pickup address" list="cities">
            <button class="swap-btn" onclick="swapLocations('cab')" title="Swap locations">‚áÑ</button>
          </div>
          
          <div class="form-group">
            <label for="cab-to">Drop Location</label>
            <input type="text" id="cab-to" placeholder="Drop address" list="cities">
          </div>
          
          <div class="form-group">
            <label for="cab-date">Pickup Date</label>
            <input type="date" id="cab-date">
          </div>
          
          <div class="form-group">
            <label for="cab-time">Pickup Time</label>
            <input type="time" id="cab-time">
          </div>
          
          <div class="form-group">
            <label for="cab-type">Car Type</label>
            <select id="cab-type">
              <option value="hatchback">Hatchback</option>
              <option value="sedan">Sedan</option>
              <option value="suv">SUV</option>
              <option value="luxury">Luxury</option>
            </select>
          </div>
        </div>

        <button class="search-btn" onclick="searchCabs()">
          üîç Search Cabs
        </button>
      </div>
    </div>

    <!-- Search Results -->
    <div class="search-results" id="search-results">
      <div class="section-title">Search Results</div>
      <div id="results-container">
        <!-- Results will be populated here -->
      </div>
    </div>

    <!-- Popular Routes -->
    <div class="popular-routes">
      <div class="section-title">Popular Routes</div>
      <div class="routes-grid" id="popular-routes-grid">
        <!-- Popular routes will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Data Lists -->
  <datalist id="cities">
    <option value="Mumbai">
    <option value="Delhi">
    <option value="Bangalore">
    <option value="Chennai">
    <option value="Kolkata">
    <option value="Hyderabad">
    <option value="Pune">
    <option value="Ahmedabad">
    <option value="Jaipur">
    <option value="Goa">
    <option value="Kerala">
    <option value="Agra">
  </datalist>

  <datalist id="stations">
    <option value="New Delhi (NDLS)">
    <option value="Mumbai Central (BCT)">
    <option value="Bangalore City (SBC)">
    <option value="Chennai Central (MAS)">
    <option value="Howrah (HWH)">
    <option value="Secunderabad (SC)">
    <option value="Pune (PUNE)">
    <option value="Ahmedabad (ADI)">
    <option value="Jaipur (JP)">
  </datalist>

  <script>
    let currentTab = 'flight';
    let currentTripType = 'oneway';
    let currentCabType = 'oneway';

    function switchTab(tab) {
      // Remove active class from all tabs and forms
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.form-section').forEach(f => f.classList.remove('active'));
      
      // Add active class to selected tab and form
      event.target.closest('.tab').classList.add('active');
      document.getElementById(tab + '-form').classList.add('active');
      
      currentTab = tab;
      hideSearchResults();
      loadPopularRoutes();
    }

    function selectTripType(type) {
      document.querySelectorAll('.trip-option').forEach(opt => opt.classList.remove('selected'));
      event.target.classList.add('selected');
      
      currentTripType = type;
      
      // Show/hide return date for round trip
      const returnGroup = document.getElementById('return-date-group');
      if (type === 'roundtrip') {
        returnGroup.style.display = 'block';
      } else {
        returnGroup.style.display = 'none';
      }
    }

    function selectCabType(type) {
      document.querySelectorAll('#cab-form .trip-option').forEach(opt => opt.classList.remove('selected'));
      event.target.classList.add('selected');
      currentCabType = type;
    }

    function swapLocations(type) {
      const fromField = document.getElementById(type + '-from');
      const toField = document.getElementById(type + '-to');
      
      const temp = fromField.value;
      fromField.value = toField.value;
      toField.value = temp;
    }

    function searchFlights() {
      const from = document.getElementById('flight-from').value;
      const to = document.getElementById('flight-to').value;
      const date = document.getElementById('flight-departure').value;
      
      if (!from || !to || !date) {
        alert('Please fill in all required fields');
        return;
      }
      
      showSearchResults('flight', from, to, date);
    }

    function searchTrains() {
      const from = document.getElementById('train-from').value;
      const to = document.getElementById('train-to').value;
      const date = document.getElementById('train-date').value;
      
      if (!from || !to || !date) {
        alert('Please fill in all required fields');
        return;
      }
      
      showSearchResults('train', from, to, date);
    }

    function searchBuses() {
      const from = document.getElementById('bus-from').value;
      const to = document.getElementById('bus-to').value;
      const date = document.getElementById('bus-date').value;
      
      if (!from || !to || !date) {
        alert('Please fill in all required fields');
        return;
      }
      
      showSearchResults('bus', from, to, date);
    }

    function searchCabs() {
      const from = document.getElementById('cab-from').value;
      const to = document.getElementById('cab-to').value;
      const date = document.getElementById('cab-date').value;
      const time = document.getElementById('cab-time').value;
      
      if (!from || !to || !date || !time) {
        alert('Please fill in all required fields');
        return;
      }
      
      showSearchResults('cab', from, to, date);
    }

    function showSearchResults(type, from, to, date) {
      const resultsContainer = document.getElementById('results-container');
      const searchResults = document.getElementById('search-results');
      
      // Generate sample results
      const results = generateSampleResults(type, from, to, date);
      
      resultsContainer.innerHTML = '';
      results.forEach(result => {
        const resultItem = document.createElement('div');
        resultItem.className = 'result-item';
        resultItem.innerHTML = `
          <div class="result-info">
            <div class="result-route">${result.route}</div>
            <div class="result-details">${result.details}</div>
            <div class="result-details">${result.duration} ‚Ä¢ ${result.operator}</div>
          </div>
          <div class="result-price">‚Çπ${result.price}</div>
          <button class="book-btn" onclick="bookService('${type}', '${result.id}', '${result.price}', '${from}', '${to}', '${date}')">
            Book Now
          </button>
        `;
        resultsContainer.appendChild(resultItem);
      });
      
      searchResults.style.display = 'block';
      searchResults.scrollIntoView({ behavior: 'smooth' });
    }

    function generateSampleResults(type, from, to, date) {
      const operators = {
        flight: ['IndiGo', 'SpiceJet', 'Air India', 'Vistara', 'GoAir'],
        train: ['Rajdhani Express', 'Shatabdi Express', 'Duronto Express', 'Garib Rath', 'Jan Shatabdi'],
        bus: ['RedBus', 'Travels India', 'VRL Travels', 'SRS Travels', 'Orange Travels'],
        cab: ['Uber', 'Ola', 'Meru Cabs', 'Easy Cabs', 'Taxi For Sure']
      };
      
      const results = [];
      const basePrice = type === 'flight' ? 3000 : type === 'train' ? 800 : type === 'bus' ? 500 : 300;
      
      for (let i = 0; i < 5; i++) {
        const operator = operators[type][i % operators[type].length];
        const price = basePrice + (Math.random() * 2000);
        const duration = type === 'flight' ? '2h 15m' : type === 'train' ? '8h 30m' : type === 'bus' ? '12h 45m' : '45 mins';
        
        results.push({
          id: `${type}_${Date.now()}_${i}`,
          route: `${from} ‚Üí ${to}`,
          details: `${new Date(date).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}`,
          duration: duration,
          operator: operator,
          price: Math.round(price)
        });
      }
      
      return results;
    }

    function bookService(type, id, price, from, to, date) {
      const user = JSON.parse(localStorage.getItem('travelmate_current_user') || 'null');
      
      if (!user) {
        alert('Please login to book services');
        window.location.href = 'login.html';
        return;
      }
      
      // Create booking
      const booking = {
        id: `BK${Date.now()}`,
        userId: user.id,
        type: type,
        title: `${type.charAt(0).toUpperCase() + type.slice(1)} from ${from} to ${to}`,
        from: from,
        to: to,
        date: new Date().toISOString(),
        travelDate: date,
        price: `‚Çπ${price}`,
        status: 'confirmed'
      };
      
      // Save booking
      const bookings = JSON.parse(localStorage.getItem('travelmate_bookings') || '[]');
      bookings.push(booking);
      localStorage.setItem('travelmate_bookings', JSON.stringify(bookings));
      
      alert(`üéâ Booking Confirmed!\n\nBooking ID: ${booking.id}\nService: ${booking.title}\nPrice: ${booking.price}\nTravel Date: ${new Date(date).toLocaleDateString()}\n\nYou can view your booking in the Upcoming section.`);
      
      // Redirect to upcoming trips
      setTimeout(() => {
        window.location.href = 'upcoming.html';
      }, 2000);
    }

    function hideSearchResults() {
      document.getElementById('search-results').style.display = 'none';
    }

    function loadPopularRoutes() {
      const routes = {
        flight: [
          { name: 'Mumbai ‚Üí Delhi', price: '‚Çπ4,500' },
          { name: 'Bangalore ‚Üí Chennai', price: '‚Çπ3,200' },
          { name: 'Delhi ‚Üí Goa', price: '‚Çπ5,800' },
          { name: 'Mumbai ‚Üí Bangalore', price: '‚Çπ4,200' }
        ],
        train: [
          { name: 'Delhi ‚Üí Mumbai', price: '‚Çπ1,200' },
          { name: 'Chennai ‚Üí Bangalore', price: '‚Çπ800' },
          { name: 'Kolkata ‚Üí Delhi', price: '‚Çπ1,500' },
          { name: 'Hyderabad ‚Üí Chennai', price: '‚Çπ900' }
        ],
        bus: [
          { name: 'Bangalore ‚Üí Chennai', price: '‚Çπ600' },
          { name: 'Mumbai ‚Üí Pune', price: '‚Çπ400' },
          { name: 'Delhi ‚Üí Jaipur', price: '‚Çπ500' },
          { name: 'Hyderabad ‚Üí Bangalore', price: '‚Çπ700' }
        ],
        cab: [
          { name: 'Airport ‚Üí City Center', price: '‚Çπ350' },
          { name: 'Railway Station ‚Üí Hotel', price: '‚Çπ250' },
          { name: 'City Tour (8 hours)', price: '‚Çπ1,200' },
          { name: 'Outstation (100 km)', price: '‚Çπ2,000' }
        ]
      };
      
      const grid = document.getElementById('popular-routes-grid');
      grid.innerHTML = '';
      
      routes[currentTab].forEach(route => {
        const card = document.createElement('div');
        card.className = 'route-card';
        card.innerHTML = `
          <div class="route-name">${route.name}</div>
          <div class="route-price">Starting ${route.price}</div>
        `;
        card.onclick = () => {
          const [from, to] = route.name.split(' ‚Üí ');
          document.getElementById(currentTab + '-from').value = from;
          document.getElementById(currentTab + '-to').value = to;
        };
        grid.appendChild(card);
      });
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      // Set minimum date to today
      const today = new Date().toISOString().split('T')[0];
      document.querySelectorAll('input[type="date"]').forEach(input => {
        input.min = today;
      });
      
      // Set default time for cab booking
      const now = new Date();
      const timeString = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
      document.getElementById('cab-time').value = timeString;
      
      loadPopularRoutes();
    });
  </script>
</body>
</html>